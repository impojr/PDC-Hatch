import e from"document";import*as saveManager from"./save.js";import*as pokemonManager from"./pokemon.js";import*as stepManager from"./steps.js";import*as screenManager from"./screen.js";import*as messaging from"messaging";import*as userManager from"./user.js";export function refreshData(){var a=saveManager.loadState(),t=e.getElementById("h-goal-percent"),n=e.getElementById("h-goal-percent-text"),r=stepManager.getDailyGoalWidth(),g=stepManager.getDailyPercent();n.text=g+"%",t.width=r,stepManager.getDailySteps()>=2e4&&!a.reached20k&&(a.reached20k=!0,a.availableEggs.push(144,145,146)),stepManager.getDailySteps()>=25e3&&!a.reached25k&&(a.reached25k=!0,a.availableEggs.push(150,151)),saveManager.saveState(a),1!=stepManager.getGoalPercentageMet()||null!=a.lastGoalReachedDate&&saveManager.formatDate(a.lastGoalReachedDate)==saveManager.formatDate(new Date)||(console.log("you reached the goal for today"),a.availableEggs.length>0&&screenManager.showGoalMet())};export function loadHome(){var t=saveManager.loadState(),n=t.pokemon[0],r=e.getElementById("h-player-name"),g=e.getElementById("h-player-image"),o=e.getElementById("h-pokemon-name"),s=e.getElementById("h-pokemon-image"),m=e.getElementById("h-player-rank");e.getElementById("h-dex").style.display=0==t.availableEggs.length?"inline":"none",r.text=t.name,g.href="Images/User/"+t.gender+".png",m.text=a(t),o.text=pokemonManager.getName(n),s.href="Images/Pokemon/"+pokemonManager.getImg(n)+".png",refreshData();let l=e.getElementById("h-btn-br"),h=e.getElementById("h-pokemon-name");l.onactivate=function(e){messaging.peerSocket.send(t.lastSyncDate)},h.onclick=function(e){screenManager.showPokemon(0)}};function a(e){return e.eggsHatched<5?"New Hatcher":e.eggsHatched<10?"Novice Hatcher":e.eggsHatched<20?"Adept Hatcher":e.eggsHatched<50?"Expert Hatcher":"Master Hatcher"}