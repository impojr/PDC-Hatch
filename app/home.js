import document from"document";import*as saveManager from"./save.js";import*as pokemonManager from"./pokemon.js";import*as stepManager from"./steps.js";import*as screenManager from"./screen.js";import*as messaging from"messaging";import*as userManager from"./user.js";export function refreshData(){var e=saveManager.loadState(),a=document.getElementById("h-goal-percent"),t=document.getElementById("h-goal-percent-text"),n=stepManager.getDailyGoalWidth(),o=stepManager.getDailyPercent();t.text=o+"%",a.width=n,stepManager.getDailySteps()>=2e4&&!e.reached20k&&(e.reached20k=!0,e.availableEggs.push(144,145,146)),stepManager.getDailySteps()>=25e3&&!e.reached25k&&(e.reached25k=!0,e.availableEggs.push(150,151)),saveManager.saveState(e),1!=stepManager.getGoalPercentageMet()||null!=e.lastGoalReachedDate&&saveManager.formatDate(e.lastGoalReachedDate)==saveManager.formatDate(new Date)||(console.log("you reached the goal for today"),e.availableEggs.length>0&&screenManager.showGoalMet())};export function loadHome(){var e=saveManager.loadState(),a=e.pokemon[0],t=document.getElementById("h-player-name"),n=document.getElementById("h-player-image"),o=document.getElementById("h-pokemon-name"),r=document.getElementById("h-pokemon-image"),g=document.getElementById("h-player-rank");document.getElementById("h-dex").style.display=0==e.availableEggs.length?"inline":"none",t.text=e.name,n.href="Images/User/"+e.gender+".png",g.text=getHatchRank(e),o.text=pokemonManager.getName(a),r.href="Images/Pokemon/"+pokemonManager.getImg(a)+".png",refreshData();let s=document.getElementById("h-btn-br"),m=document.getElementById("h-pokemon-name");s.onactivate=function(a){document.getElementById("spinner").state="enabled",messaging.peerSocket.send(e.lastSyncDate)},m.onclick=function(e){screenManager.showPokemon(0)}};function getHatchRank(e){return e.eggsHatched<5?"New Hatcher":e.eggsHatched<10?"Novice Hatcher":e.eggsHatched<20?"Adept Hatcher":e.eggsHatched<50?"Expert Hatcher":"Master Hatcher"}